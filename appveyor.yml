image: Visual Studio 2017
environment:
  OSENV: windows
  encryptedkey:
    secure: 8HCeZ0WW/f09cU7PgV31q14Xy46vU/2dYHnP0ZCpi/tLvVzr2gnY+BZ99S1u1cAHJNdAyRX/pp91L91KiXdh/2ZuE1fqAXcaVo2/j4VB01c=
  encryptediv:
    secure: UUs7HYg9U50gP2ryZoTtH2WaU0BhoSLBhsOIQRgHpj+oluUpXTv/O4spjDRC9qOT
artifacts:
  - path: dist
platform:
  - x64
init:
  - git config --global core.autocrlf input
cache:
  - node_modules
  - '%LOCALAPPDATA%/Yarn'
install:
  - ps: Install-Product node 9 x64
  - npm i -g --production windows-build-tools
  - npm config set msvs_version 2015 --global
  - set PATH=C:\Ruby22\bin;%PATH%
  - gem install sass compass
  - npm i -g yarn
  - yarn
build_script:
  - set DEBUG=electron-builder
  - yarn dist
#test_script:
#  - yarn test
deploy_script:
  - deploy.cmd
    